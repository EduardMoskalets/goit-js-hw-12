{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// export function getPhotos(query) {\n//     const BASE_URL = 'https://pixabay.com/api/';\n//     const API_KEY = '44405907-01ac5a46b548f68b2a274235a'\n\n//     const params = {\n//         q: query,\n//         image_type: 'photo',\n//         orientation: 'horizontal',\n//         safesearch: true,\n//         key: API_KEY,\n//     }\n\n//     const options = new URLSearchParams(params);\n//     return fetch(`${BASE_URL}?${options}`).then(res => {\n//         if (!res.ok) {\n//             throw new Error('Error!');\n//         }\n//         return res.json();\n//     });\n// }\n\n\n// =================================================== var 2 ================================================================\n// ===============доступ к API =============================\nimport axios from 'axios';\n\nconst API_KEY = '44405907-01ac5a46b548f68b2a274235a';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n// ========================= функция для HTTP запросов  ======================================\n// export async function getPhotos(query) {\n//     // необходим URL к нему добавить данные ключа + базовый + параметры\n//     const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true`;\n    \n//     try {\n//         const response = await fetch(url);\n//         const data = await response.json();\n//         return data.hits;\n//     } catch (error) {\n//         console.error('Error fetching the images:', error);\n//         throw error;\n//     }\n// }\n\nexport async function getPhotos(query, page = 1, perPage = 15) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`; \n    \n    try {\n        const response = await axios.get(url);\n        return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching the images:', error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport function clearResults(container) {\n    container.innerHTML = '';\n}\n\nexport function renderImages(images, container) {\n    const markup = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery__item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery__image\" />\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n                <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n                <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n            </div>\n        </a>\n    `).join('');\n    \n    container.insertAdjacentHTML('beforeend', markup);\n\n    // Инсталяция библиотеки\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\n//  библиотека ИзиТоаст\nexport function showToast(type, message) {\n    iziToast[type]({\n        title: type.charAt(0).toUpperCase() + type.slice(1),\n        message: message,\n    });\n}\n","// ================= Импорт с JS файлов ==============================\nimport { getPhotos } from './js/pixabay-api.js';\nimport { clearResults, renderImages, showToast } from './js/render-functions.js';\n\n//  ======== все элементы =========\nconst searchForm = document.getElementById('searchForm');\nconst searchQueryInput = document.getElementById('searchQuery');\nconst resultsContainer = document.getElementById('results');\n\n\n// ============== слушатель ========================\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n// =============== если нет значения =================\n    const query = searchQueryInput.value.trim();\n    if (!query) {\n        showToast('error', 'Search query cannot be empty');\n        return;\n    }\n\n    clearResults(resultsContainer);\n    showLoadingIndicator();\n// ================= фото ==================\n    try {\n        const images = await getPhotos(query);\n        hideLoadingIndicator();\n\n        if (images.length > 0) {\n            renderImages(images, resultsContainer);\n        } else {\n            showToast('info', 'Sorry, there are no images matching your search query. Please try again!');\n        }\n    } catch (error) {\n        hideLoadingIndicator();\n        showToast('error', 'Something went wrong. Please try again later.');\n    }\n});\n\n// =====================================================================\n\n// =============== добавление в разметку лоадер =========================\nfunction showLoadingIndicator() {\n    resultsContainer.innerHTML = '<div class=\"loader\"></div>';\n}\n\n// ================ откл лоадера ===============================================\nfunction hideLoadingIndicator() {\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.remove();\n    }\n}"],"names":["API_KEY","BASE_URL","getPhotos","query","page","perPage","url","axios","error","clearResults","container","renderImages","images","markup","image","SimpleLightbox","showToast","type","message","iziToast","searchForm","searchQueryInput","resultsContainer","event","showLoadingIndicator","hideLoadingIndicator","loader"],"mappings":"owBA0BA,MAAMA,EAAU,qCACVC,EAAW,2BAiBV,eAAeC,EAAUC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC3D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,GAE9J,GAAI,CAEA,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,KAAK,IACxB,OAAQE,EAAO,CACZ,cAAQ,MAAM,6BAA8BA,CAAK,EAC3CA,CACT,CACL,CCjDO,SAASC,EAAaC,EAAW,CACpCA,EAAU,UAAY,EAC1B,CAEO,SAASC,EAAaC,EAAQF,EAAW,CAC5C,MAAMG,EAASD,EAAO,IAAIE,GAAS;AAAA,mBACpBA,EAAM,aAAa;AAAA,wBACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,qDAETA,EAAM,KAAK;AAAA,qDACXA,EAAM,KAAK;AAAA,wDACRA,EAAM,QAAQ;AAAA,yDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAGnE,EAAE,KAAK,EAAE,EAEVJ,EAAU,mBAAmB,YAAaG,CAAM,EAG/B,IAAIE,EAAe,YAAY,EACvC,QAAO,CACpB,CAGO,SAASC,EAAUC,EAAMC,EAAS,CACrCC,EAASF,CAAI,EAAE,CACX,MAAOA,EAAK,OAAO,CAAC,EAAE,cAAgBA,EAAK,MAAM,CAAC,EAClD,QAASC,CACjB,CAAK,CACL,CC9BA,MAAME,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAmB,SAAS,eAAe,aAAa,EACxDC,EAAmB,SAAS,eAAe,SAAS,EAI1DF,EAAW,iBAAiB,SAAU,MAAOG,GAAU,CACnDA,EAAM,eAAc,EAEpB,MAAMpB,EAAQkB,EAAiB,MAAM,KAAI,EACzC,GAAI,CAAClB,EAAO,CACRa,EAAU,QAAS,8BAA8B,EACjD,MACH,CAEDP,EAAaa,CAAgB,EAC7BE,IAEA,GAAI,CACA,MAAMZ,EAAS,MAAMV,EAAUC,CAAK,EACpCsB,IAEIb,EAAO,OAAS,EAChBD,EAAaC,EAAQU,CAAgB,EAErCN,EAAU,OAAQ,0EAA0E,CAEnG,MAAe,CACZS,IACAT,EAAU,QAAS,+CAA+C,CACrE,CACL,CAAC,EAKD,SAASQ,GAAuB,CAC5BF,EAAiB,UAAY,4BACjC,CAGA,SAASG,GAAuB,CAC5B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACAA,EAAO,OAAM,CAErB"}