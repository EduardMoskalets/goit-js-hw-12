{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// export function getPhotos(query) {\n//     const BASE_URL = 'https://pixabay.com/api/';\n//     const API_KEY = '44405907-01ac5a46b548f68b2a274235a'\n\n//     const params = {\n//         q: query,\n//         image_type: 'photo',\n//         orientation: 'horizontal',\n//         safesearch: true,\n//         key: API_KEY,\n//     }\n\n//     const options = new URLSearchParams(params);\n//     return fetch(`${BASE_URL}?${options}`).then(res => {\n//         if (!res.ok) {\n//             throw new Error('Error!');\n//         }\n//         return res.json();\n//     });\n// }\n\n\n// =================================================== var 2 ================================================================\n// ===============доступ к API =============================\nimport axios from 'axios';\n\nconst API_KEY = '44405907-01ac5a46b548f68b2a274235a';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\n// ========================= функция для HTTP запросов  ======================================\n// export async function getPhotos(query) {\n//     // необходим URL к нему добавить данные ключа + базовый + параметры\n//     const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true`;\n    \n//     try {\n//         const response = await fetch(url);\n//         const data = await response.json();\n//         return data.hits;\n//     } catch (error) {\n//         console.error('Error fetching the images:', error);\n//         throw error;\n//     }\n// }\n\nexport async function getPhotos(query, page = 1) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}`;\n    \n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching the images:', error);\n        throw error;\n    }\n}","// import SimpleLightbox from \"simplelightbox\";\n// import \"simplelightbox/dist/simple-lightbox.min.css\";\n// import iziToast from \"izitoast\";\n// import \"izitoast/dist/css/iziToast.min.css\";\n\n// export function clearResults(container) {\n//     container.innerHTML = '';\n// }\n\n// export function renderImages(images, container) {\n//     const markup = images.map(image => `\n//         <a href=\"${image.largeImageURL}\" class=\"gallery__item\">\n//             <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery__image\" />\n//             <div class=\"info\">\n//                 <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n//                 <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n//                 <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n//                 <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n//             </div>\n//         </a>\n//     `).join('');\n    \n//     container.insertAdjacentHTML('beforeend', markup);\n\n//     // Инсталяция библиотеки\n//     const lightbox = new SimpleLightbox('.gallery a');\n//     lightbox.refresh();\n// }\n\n// export function showLoadMoreButton(buttonElement) {\n//     buttonElement.classList.remove('hidden');\n// }\n\n// export function hideLoadMoreButton(buttonElement) {\n//     buttonElement.classList.add('hidden');\n// }\n\n// //  библиотека ИзиТоаст\n// export function showToast(type, message) {\n//     iziToast[type]({\n//         title: type.charAt(0).toUpperCase() + type.slice(1),\n//         message: message,\n//     });\n// }\n\n// // =====================================Скролл ==============================================\n// export function scrollToNextGroup() {\n//     const galleryHeight = document.querySelector('.gallery').scrollHeight;\n//     window.scrollBy({\n//         top: galleryHeight,\n//         behavior: 'smooth'\n//     });\n// }\n\n// =============================Вариант 2====================================================================\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport function clearResults(container) {\n    container.innerHTML = '';\n}\n//  =========================== редер ======================================\nexport function renderImages(images, container) {\n    const markup = images.map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery__item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery__image\" />\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n                <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n                <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n            </div>\n        </a>\n    `).join('');\n    \n    container.insertAdjacentHTML('beforeend', markup);\n\n    const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\n// ======================================= библиотека изи тоаст ==========================\nexport function showToast(type, message) {\n    iziToast[type]({\n        title: type.charAt(0).toUpperCase() + type.slice(1),\n        message: message,\n    });\n}\n\n//  ============================ переключение =======================================\nexport function toggleLoadMoreButton(show) {\n    const loadMoreButton = document.querySelector('.load-more');\n    if (show) {\n        loadMoreButton.classList.remove('hidden');\n    } else {\n        loadMoreButton.classList.add('hidden');\n    }\n}\n\n\n// ======================= функция скролл пейдж =======================================\nexport function scrollPage() {\n    const { height: cardHeight } = document\n        .querySelector('.gallery__item')\n        .getBoundingClientRect();\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n","// // // ================= Импорт с JS файлов ==============================\n// import { getPhotos } from './js/pixabay-api.js';\n// import {\n//     clearResults,\n//     renderImages,\n//     showToast,\n//     showLoadMoreButton,\n//     hideLoadMoreButton,\n//     showLoader,\n//     hideLoader,\n//     scrollToNextGroup\n// } from './js/render-functions.js'\n\n// //  ======== все элементы =========\n// const searchForm = document.getElementById('searchForm');\n// const searchQueryInput = document.getElementById('searchQuery');\n// const resultsContainer = document.getElementById('results');\n// // const loadMoreBtn = document.querySelector('.load-more');\n\n// // ============значения ======================================\n// let query = '';\n// let page = 1;\n// let totalHits = 0;\n// const PER_PAGE = 15;\n\n// // ============== слушатель ========================\n// searchForm.addEventListener('submit', async (event) => {\n//     event.preventDefault();\n// // =============== если нет значения =================\n//     const query = searchQueryInput.value.trim();\n//     if (!query) {\n//         showToast('error', 'Search query cannot be empty');\n//         return;\n//     }\n\n//     clearResults(resultsContainer);\n//     showLoadingIndicator();\n// // ================= фото ==================\n//     try {\n//         const images = await getPhotos(query);\n//         hideLoadingIndicator();\n\n//         if (images.length > 0) {\n//             renderImages(images, resultsContainer);\n//         } else {\n//             showToast('info', 'Sorry, there are no images matching your search query. Please try again!');\n//         }\n//     } catch (error) {\n//         hideLoadingIndicator();\n//         showToast('error', 'Something went wrong. Please try again later.');\n//     }\n// });\n\n// // =====================================================================\n\n// // =============== добавление в разметку лоадер =========================\n// function showLoadingIndicator() {\n//     resultsContainer.innerHTML = '<div class=\"loader\"></div>';\n// }\n\n// // ================ откл лоадера ===============================================\n// function hideLoadingIndicator() {\n//     const loader = document.querySelector('.loader');\n//     if (loader) {\n//         loader.remove();\n//     }\n// }\n\n// =========================================================================================\n// ======================================вариант 2=======================================\n\nimport { getPhotos } from './js/pixabay-api.js';\nimport { clearResults, renderImages, showToast, toggleLoadMoreButton, scrollPage } from './js/render-functions.js';\n\nconst searchForm = document.getElementById('searchForm');\nconst searchQueryInput = document.getElementById('searchQuery');\nconst resultsContainer = document.getElementById('results');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\n// let totalHits = 0;\n\n// ================= слушатель сабмит ==============================\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    const query = searchQueryInput.value.trim();\n    if (!query) {\n        showToast('error', 'Search query cannot be empty');\n        return;\n    }\n\n// =======================данные ====================================\n    currentQuery = query;\n    currentPage = 1;\n    clearResults(resultsContainer);\n    // Спрятать кнопку =====================================\n    toggleLoadMoreButton(false); \n    showLoadingIndicator();\n// ====================== кнопка лоад мор ================================\n    try {\n        const { hits, totalHits } = await getPhotos(query, currentPage);\n        // renderImages(hits, resultsContainer);\n        // totalHits = total; // сохранить количество результатов\n        hideLoadingIndicator();\n\n        if (hits.length > 0) {\n            renderImages(hits, resultsContainer);\n            toggleLoadMoreButton(currentPage * 15 < totalHits);\n            //  показать кнопку если есть изображения \n        } else {\n            showToast('info', 'Sorry, there are no images matching your search query. Please try again!');\n        }\n    } catch (error) {\n        hideLoadingIndicator();\n        showToast('error', 'Something went wrong. Please try again later.');\n    }\n});\n\n// =====================слушатель клик ==========================\nloadMoreButton.addEventListener('click', async () => {\n    currentPage++;\n    showLoadingIndicator();\n    \n    try {\n        const { hits, totalHits } = await getPhotos(currentQuery, currentPage);\n        hideLoadingIndicator();\n\n        if (hits.length > 0) {\n            renderImages(hits, resultsContainer);\n            scrollPage();\n            toggleLoadMoreButton(currentPage * 15 < totalHits); // Показать или спрятать кнопку \n\n            if (currentPage * 15 >= totalHits) {\n                showToast('info', \"We're sorry, but you've reached the end of search results.\");\n                toggleLoadMoreButton(false); // Спрятать кнопку\n            }\n        } else {\n            showToast('info', \"We're sorry, but you've reached the end of search results.\");\n            toggleLoadMoreButton(false); // Спрятать кнопку\n        }\n    } catch (error) {\n        hideLoadingIndicator();\n        showToast('error', 'Something went wrong. Please try again later.');\n    }\n});\n//  ==================== проверка ===============================================\n//  спрятать кнопку если достигло конца результатта\n//         if (currentPage * 15 >= totalHits) {\n//             showToast('info', \"We're sorry, but you've reached the end of search results.\");\n//             toggleLoadMoreButton(false);\n//         } else {\n//             showToast('info', \"We're sorry, but you've reached the end of search results.\");\n//             toggleLoadMoreButton(false); //  прячем кнопку если нет больше результатов\n//         }\n//     } catch (error) {\n//         hideLoadingIndicator();\n//         showToast('error', 'Something went wrong. Please try again later.');\n//     }\n// });\n\n// =========================== лоадер ========================================\nfunction showLoadingIndicator() {\n    resultsContainer.insertAdjacentHTML('beforeend', '<div class=\"loader\"></div>');\n}\n\nfunction hideLoadingIndicator() {\n    const loader = document.querySelector('.loader');\n    if (loader) {\n        loader.remove();\n    }\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","getPhotos","query","page","url","axios","error","clearResults","container","renderImages","images","markup","image","SimpleLightbox","showToast","type","message","iziToast","toggleLoadMoreButton","show","loadMoreButton","scrollPage","cardHeight","searchForm","searchQueryInput","resultsContainer","currentPage","currentQuery","event","showLoadingIndicator","hits","totalHits","hideLoadingIndicator","loader"],"mappings":"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"}